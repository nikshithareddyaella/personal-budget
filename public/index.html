<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- This is a SEO Change : Title tag optimization -->
    <title>Personal Budget Management App | Effortlessly Track and Optimize Your Finances</title>
    <!--This is a SEO Change : Added meta description -->
    <meta name="description" content="Manage your finances efficiently with our Personal Budget app. Track expenses, set alerts, and stay on budget to achieve financial freedom.">
    <link rel="stylesheet" href="/reset.css">
    <link rel="stylesheet" href="/main.css">
       </head>
<body>
     <!-- This is an A11y Change : added skip to content -->
     <a href="#main-content" class="skip-to-content">Skip to content</a>

    <!-- This is a Semantic HTML Change : changed from div to header and nav -->
    <!-- This is an A11y Change : added roles for header, nav, footer -->
    <header role="banner">
        <nav role="navigation"> 
            <div class="menu"> 
            <ul class="ultop">
                <li><a href="/" aria-label="Go to Homepage">Homepage</a></li>
                <li><a href="/about.html" aria-label="Learn more About us">About</a></li>
                <li><a href="/login.html" aria-label="Login to your account">Login</a></li>
                <li><a href="https://google.com" aria-label="Visit Google">Google</a></li>
            </ul>
            </div>
        </nav>
    </header>
    <!-- This is a SEO Change : Heading Tag Hierarchy -->
    <div class="hero">
        <h1>Personal Budget Management App</h1>
        <h2>Track Your Expenses</h2>
        <h2>Stay on Budget</h2>
    </div>

    <div class="container center" id="main-content">
        
        <!-- This is a Semantic HTML Change : change from div to section tag -->
        <section class="page-area">
            <div class="text-box">
                <!-- This is a SEO Change : using heading tags correctly, replacing <h1> with <h2> -->
                <!-- This is a SEO Change : Descriptive <h1> tag- change from "stay on track" to "Track Your Spending Effectively" -->
                <h2>Track Your Spending Effectively</h2>
                <p>
                    Do you know where you are spending your money? If you really stop to track it down,
                    you would get surprised! Proper budget management depends on real data... and this
                    app will help you with that!
                </p>
            </div>
    
            <div class="text-box">
                <h2>Alerts</h2>
                <p>
                    What if your clothing budget ended? You will get an alert. The goal is to never go over the budget.
                </p>
            </div>
    
            <div class="text-box">
                <h2>Results</h2>
                <p>
                    People who stick to a financial plan, budgeting every expense, get out of debt faster!
                    Also, they to live happier lives... since they expend without guilt or fear... 
                    because they know it is all good and accounted for.
                </p>
            </div>
    
            <div class="text-box">
                <h2>Free</h2>
                <p>
                    This app is free!!! And you are the only one holding your data!
                </p>
            </div>

            <div class="text-box">
                <h2>Stay on track</h2>
                <p>
                    Do you know where you are spending your money? If you really stop to track it down,
                    you would get surprised! Proper budget management depends on real data... and this
                    app will help you with that!
                </p>
            </div>
    
            <div class="text-box">
                <h2>Alerts</h2>
                <p>
                    What if your clothing budget ended? You will get an alert. The goal is to never go over the budget.
                </p>
            </div>
    
            <div class="text-box">
                <h2>Results</h2>
                <p>
                    People who stick to a financial plan, budgeting every expense, get out of debt faster!
                    Also, they to live happier lives... since they expend without guilt or fear... 
                    because they know it is all good and accounted for.
                </p>
            </div>
    
            <div class="text-box">
                <h2>Chart</h2>
                <p>
                    <canvas id="myChart" width="400" height="400"></canvas>
                </p>
            </div>

        </section>

    </div>
    
     <!-- This is a Semantic HTML Change : change from div to footer tag -->
    <footer role="contentinfo" class="bottom">
        <div class="center">
            All rights reserved &copy; Nikshitha Reddy Aella
        </div>
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js" integrity="sha512-DdX/YwF5e41Ok+AI81HI8f5/5UsoxCVT9GKYZRIzpLxb8Twz4ZwPPX+jQMwMhNQ9b5+zDEefc+dcvQoPWGNZ3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        var dataSource ={
            datasets:[
                {
                    data: [30, 350, 90],
                    backgroundColor: [
                    '#ffcd56',
                    '#ff6384',
                    '#36a2eb',
                    '#fd6b19',
                    ],
                }
            ],

            labels: [
                'Eat out',
                'Rent',
                'Groceries'
            ]
        };

        function createChart(){
           var ctx = document.getElementById("myChart").getContext("2d");

           // Check if there is an existing chart and destroy it
        if (myPieChart) {
            myPieChart.destroy();
        }

            var myPieChart = new Chart(ctx, {
                type: 'pie',
                data: dataSource
            });
        }

        function getBudget(){
            axios.get('/budget')
            .then(function (res) {
                console.log(res);
                for(var i =0; i< res.data.myBudget.length; i++){
                    dataSource.datasets[0].data[i] = res.data.myBudget[i].budget;
                    dataSource.labels[i] = res.data.myBudget[i].title;
                }
                dataSource.datasets[0].data = res.data.myBudget.map(item => item.budget);
                dataSource.labels = res.data.myBudget.map(item => item.title);
                createChart();
            })
            .catch(function (error) {
                console.error('Error fetching budget data:', error);
            });
        }

        getBudget();
    </script>
</body>
</html>
